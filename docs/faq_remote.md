**Q：使用RDP进行远程连接时，有时连接界面一闪而过，在日志页面显示错误“协议不支持”。**

A：Teleport目前支持两类RDP协议，一是最原生的RDP协议，二是基于SSL链路层的RDP协议。高版本Windows系统的RDP协议在身份认证方面引入了NLA（网络级身份验证），此方式目前teleport尚未支持。要想使用RDP远程连接这些Windows主机，需要在远程主机上关闭NLA。

在远程主机上打开“**计算机-属性-远程设置**”，将默认的“仅允许运行使用网络级别身份验证的远程桌面的计算机连接”勾选项**去掉**。如果有选择协议的选项，请选择“允许运行任意版本远程桌面的计算机连接” 。

**Q：RDP不支持复制粘贴？**

A：v3.5.5版已经可以支持复制粘贴了！

**Q：那么为什么不支持使用系统自带的原生RDP客户端 mstsc ？**

A：v3.5.5版本支持使用Windows自带的RDP客户端 mstsc 进行远程连接，而且同时支持复制粘贴了。

**Q：但是我本机是Win7系统，为什么远程连接后仍然无法复制粘贴？**

A: 首先，需要使用 v3.5.5 版本。然后，请按[这篇说明进行操作](faq_win7_mstsc.md)，就可以进行复制粘贴了。


**Q：有些RDP远程的录像无法回放，提示无法下载录像文件。**

A：有两种可能性：

- 你的RDP远程主机，登录用户是域用户，所以使用了 "domain\\username" 这种方式。请修改此远程主机的登录账号为 "username@domain" 形式，后续的远程操作录像就可以正常播放了。
- 目前回放RDP的录像时，会在本机启动特制的RDP录像播放工具，此工具需要从teleport服务器上下载录像文件并回放。因为播放工具的限制（bug），未做域名解析，因此，如果你以域名方式而不是IP方式访问teleport服务的话，将无法正常下载录像文件，也就无法回放了。


**Q：有时候进行远程连接时，WEB页面提示“核心服务未启动”。** _（注：v3版本已经修正了此问题）_

A：确实是核心服务未启动，应该是核心服务崩溃了，常见于执行一些无法进行的RDP远程连接（例如远程主机地址无法连接之类的）之后，因为核心服务的bug导致核心服务崩溃。此问题正在想办法解决。目前只能重启核心服务，或者在teleport服务器上开启定时执行核心服务启动脚本（核心服务启动脚本会自己检查是否已经启动了，如果当前没有启动，则会启动，否则忽略）。目前teleport QQ群里有同学已经写了这样的脚本，临时解决一下问题。

**Q：V3版本，MacOS平台进行SSH远程连接时，SSH命令行返回错误“Invalid key length”。** _（注：v3.01.6版本已经修正了此问题）_

A：Teleport服务端的SSH转发服务内建的RSA私钥是1024位的，高版本的MacOS的SSH客户端要求2048位以上的RSA密钥对。临时解决办法是使用工具`ssh-keygen`生成2048位的密钥对，替换Teleport服务内建的，然后重启核心服务即可。

```shell
$> cd /usr/local/teleport/data/etc
$> ssh-keygen -f tp_ssh_server.key
```

注意，提示设置密码时，直接回车，不能为密钥设置密码，否则核心服务将无法加载此密钥文件。

**Q：使用ssh登录华为交换机，总是提示密码错误。**

A：华为交换机默认开启了keyboard-interactive模式，teleport以此认证模式进行认证时，会因为“模拟交互过程”不匹配而导致认证失败（而非密码错误），因此，可以关闭此认证模式。

正常ssh远程到华为交换机，执行以下命令关闭交互式认证模式：

```bash
undo ssh server authentication-type keyboard-interactive enable
```

关闭后即可通过teleport进行远程管理了。


